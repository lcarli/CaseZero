# CaseZero API - Teste de Autenticação JWT

@baseUrl = http://localhost:5029/api
@adminEmail = admin@casezero.com
@adminPassword = CaseZero123!
@detectiveEmail = detective@casezero.com
@detectivePassword = Detective123!

### 1. Registro de novo usuário
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "{{detectiveEmail}}",
  "username": "detective1",
  "password": "{{detectivePassword}}",
  "firstName": "João",
  "lastName": "Silva",
  "department": "Investigação Criminal"
}

### 2. Login com usuário admin (criado automaticamente)
# @name adminLogin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "{{adminEmail}}",
  "password": "{{adminPassword}}"
}

### 3. Login com usuário detective
# @name detectiveLogin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "{{detectiveEmail}}",
  "password": "{{detectivePassword}}"
}

### 4. Obter perfil do usuário (requer autenticação)
GET {{baseUrl}}/auth/profile
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 5. Listar casos (requer autenticação)
GET {{baseUrl}}/cases
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 6. Obter caso específico (requer autenticação)
GET {{baseUrl}}/cases/1
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 7. Criar novo caso (requer permissão de Supervisor ou Admin)
POST {{baseUrl}}/cases
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "title": "Roubo na Loja Central",
  "titleEn": "Central Store Robbery",
  "description": "Investigação de roubo em loja do centro da cidade",
  "descriptionEn": "Investigation of robbery in downtown store",
  "difficulty": 2,
  "estimatedTimeMinutes": 120,
  "isPublished": true
}

### === EVIDENCE ENDPOINTS ===

### 8. Listar evidências de um caso
GET {{baseUrl}}/evidence/case/1
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 9. Obter evidência específica
GET {{baseUrl}}/evidence/1
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 10. Criar nova evidência (requer permissão de Analyst ou superior)
POST {{baseUrl}}/evidence
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "caseId": 1,
  "evidenceNumber": "EVD-001",
  "name": "Câmera de Segurança",
  "nameEn": "Security Camera",
  "description": "Gravação da câmera de segurança do estabelecimento",
  "descriptionEn": "Security camera recording from the establishment",
  "type": 3,
  "category": 1,
  "location": "Entrada principal da loja",
  "locationEn": "Main entrance of the store",
  "collectedBy": "Detective Silva",
  "filePath": "/evidence/camera_footage_001.mp4",
  "content": "Vídeo mostra suspeito entrando na loja às 14:30",
  "contentEn": "Video shows suspect entering store at 14:30",
  "isAvailable": true,
  "requiresAnalysis": true,
  "tags": "video,security,entrance"
}

### 11. Atualizar evidência
PUT {{baseUrl}}/evidence/1
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "evidenceNumber": "EVD-001-Updated",
  "name": "Câmera de Segurança - Atualizada",
  "nameEn": "Security Camera - Updated",
  "description": "Gravação da câmera de segurança do estabelecimento - versão processada",
  "descriptionEn": "Security camera recording from the establishment - processed version",
  "type": 3,
  "category": 1,
  "location": "Entrada principal da loja",
  "locationEn": "Main entrance of the store",
  "collectedBy": "Detective Silva",
  "filePath": "/evidence/camera_footage_001_processed.mp4",
  "content": "Vídeo processado mostra suspeito entrando na loja às 14:30",
  "contentEn": "Processed video shows suspect entering store at 14:30",
  "isAvailable": true,
  "requiresAnalysis": false,
  "tags": "video,security,entrance,processed"
}

### 12. Alternar disponibilidade da evidência
POST {{baseUrl}}/evidence/1/toggle-availability
Authorization: Bearer {{adminLogin.response.body.token}}

### 13. Listar evidências que requerem análise
GET {{baseUrl}}/evidence/requiring-analysis
Authorization: Bearer {{adminLogin.response.body.token}}

### === ANALYSIS ENDPOINTS ===

### 14. Listar todas as análises
GET {{baseUrl}}/analysis
Authorization: Bearer {{adminLogin.response.body.token}}

### 15. Obter análise específica
GET {{baseUrl}}/analysis/1
Authorization: Bearer {{adminLogin.response.body.token}}

### 16. Listar análises de uma evidência
GET {{baseUrl}}/analysis/evidence/1
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 17. Criar nova solicitação de análise
POST {{baseUrl}}/analysis
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "evidenceId": 1,
  "sessionId": 1,
  "type": 1,
  "estimatedTimeMinutes": 120,
  "notes": "Análise forense do vídeo para identificação do suspeito"
}

### 18. Atualizar resultado da análise
PUT {{baseUrl}}/analysis/1
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "status": 2,
  "result": "Identificado suspeito do sexo masculino, aproximadamente 1.80m de altura",
  "resultEn": "Identified male suspect, approximately 1.80m tall",
  "notes": "Análise completa. Características físicas bem visíveis no vídeo."
}

### 19. Listar análises pendentes
GET {{baseUrl}}/analysis/pending
Authorization: Bearer {{adminLogin.response.body.token}}

### 20. Listar análises por status (1=Pending, 2=Completed, 3=InProgress)
GET {{baseUrl}}/analysis/status/2
Authorization: Bearer {{adminLogin.response.body.token}}

### === USER MANAGEMENT ===

### 21. Listar todos os usuários (Admin only)
GET {{baseUrl}}/users
Authorization: Bearer {{adminLogin.response.body.token}}

### 22. Obter usuário específico (Admin only)
GET {{baseUrl}}/users/1
Authorization: Bearer {{adminLogin.response.body.token}}

### 23. Atualizar perfil de usuário
PUT {{baseUrl}}/users/2
Authorization: Bearer {{adminLogin.response.body.token}}
Content-Type: application/json

{
  "firstName": "João Carlos",
  "lastName": "Silva Santos",
  "department": "Investigação Criminal - Homicídios",
  "role": "Detective"
}

### 24. Desativar usuário (Admin only)
DELETE {{baseUrl}}/users/2
Authorization: Bearer {{adminLogin.response.body.token}}

### === INVESTIGATION SESSION ENDPOINTS ===

### 25. Iniciar nova sessão de investigação
POST {{baseUrl}}/investigationsession/start
Authorization: Bearer {{detectiveLogin.response.body.token}}
Content-Type: application/json

{
  "caseId": 1,
  "notes": "Iniciando investigação do caso tutorial"
}

### 26. Listar minhas sessões de investigação
GET {{baseUrl}}/investigationsession/my-sessions
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 27. Obter sessão específica
GET {{baseUrl}}/investigationsession/1
Authorization: Bearer {{detectiveLogin.response.body.token}}

### 28. Atualizar progresso da sessão
PUT {{baseUrl}}/investigationsession/1/progress
Authorization: Bearer {{detectiveLogin.response.body.token}}
Content-Type: application/json

{
  "hintsUsed": 2,
  "evidencesViewed": 5,
  "analysesRequested": 1,
  "sessionData": "{\"currentStep\": \"analyzing_evidence\", \"progress\": 60}",
  "notes": "Progresso: analisando evidências do local do crime"
}

### 29. Finalizar sessão de investigação
POST {{baseUrl}}/investigationsession/1/end
Authorization: Bearer {{detectiveLogin.response.body.token}}
Content-Type: application/json

{
  "score": 85,
  "notes": "Caso resolvido com sucesso. Identificado o suspeito através das evidências."
}

### 30. Listar todas as sessões (Admin/Supervisor only)
GET {{baseUrl}}/investigationsession
Authorization: Bearer {{adminLogin.response.body.token}}

### 31. Listar sessões por caso (Admin/Supervisor only)
GET {{baseUrl}}/investigationsession/case/1
Authorization: Bearer {{adminLogin.response.body.token}}

### 32. Obter estatísticas das sessões (Admin/Supervisor only)
GET {{baseUrl}}/investigationsession/statistics
Authorization: Bearer {{adminLogin.response.body.token}}

### === TUTORIAL SPECIFIC ENDPOINTS ===

### 33. Obter caso tutorial
GET {{baseUrl}}/cases/tutorial
Authorization: Bearer {{detectiveLogin.response.body.token}}

### === ALTERNATIVAS COM TOKEN MANUAL ===
# Se a captura automática não funcionar, execute o login e copie o token:
# Exemplo: Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

### Login manual - copie o token da resposta
# POST {{baseUrl}}/auth/login
# Content-Type: application/json
# {
#   "email": "admin@casezero.com",
#   "password": "CaseZero123!"
# }

# Então use: Authorization: Bearer SEU_TOKEN_AQUI
